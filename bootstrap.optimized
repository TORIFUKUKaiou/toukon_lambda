#!/bin/sh
set -euo pipefail

# ğŸ”¥ é—˜é­‚Lambda ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆï¼ˆæœ€é©åŒ–ç‰ˆå¯¾å¿œï¼‰

if [ -z "${AWS_LAMBDA_RUNTIME_API:-}" ]; then
    # ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œæ™‚
    if [ -f "/usr/local/bin/aws-lambda-rie" ]; then
        echo "ğŸ”¥ ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰: RIEèµ·å‹•"
        exec /usr/local/bin/aws-lambda-rie /var/task/bin/toukon_lambda start
    else
        echo "ğŸ”¥ ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰: ç›´æ¥èµ·å‹•ï¼ˆRIEç„¡ã—ï¼‰"
        exec /var/task/bin/toukon_lambda start
    fi
else
    # AWS Lambdaç’°å¢ƒã§ã®å®Ÿè¡Œ
    echo "ğŸ”¥ AWS Lambdaç’°å¢ƒ: ç›´æ¥å®Ÿè¡Œ"
    exec /var/task/bin/toukon_lambda start
fi
